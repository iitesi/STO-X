<div class="container">

    <!--Errors row-->
    <div class="eleven columns alert alert-error" ng-show="errors.length">
        <span ng-repeat="error in errors">{{error}}</span>
    </div>

    <!--Messages row-->
    <div class="eleven columns alert alert-info" ng-show="messages.length">
        <span ng-repeat="message in messages">{{message}}</span>
    </div>

</div>

<!--Page title row-->
<div class="container">
   <div class="page-header">
        <h1><a href="/booking/index.cfm?action=air.lowfare&amp;SearchID={{searchId}}">Raleigh Durham Intl Arpt (RDU), Morrisville, NC :: Fri Aug 2 - Fri Aug 9</a></h1>
    </div>
</div>


<!---First row--->
<div class="container">
    <div class="eleven columns">
        <span id="filterBarTitle">Filter By</span>
        <div class="navbar">
            <div class="navbar-inner">
                <ul class="nav">

                    <li class="dropdown">
                        <a href="#"class="dropdown-toggle" data-toggle="dropdown">Hotel Chain<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li ng-repeat="vendor in filterItems.vendors">
                                <input type="checkbox" value="{{vendor.code}}" ng-model="vendor.checked"> {{vendor.name}}
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Amenities<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li ng-repeat="amenity in filterItems.amenities">
                                <input type="checkbox" value="{{amenity}}" ng-model="amenity.checked"> {{amenity.name}}
                            </li>
                        </ul>
                    </li>

                    <li ng-class="{'active': filterItems.inPolicyOnly}" ><a ng-click="toggleInPolicyOnly()">In Policy</a></li>
                    <li ng-class="{'active': filterItems.noSoldOut}"><a ng-click="toggleNoSoldOut()">No Sold Out</a></li>
                    <li><a ng-click="clearFilters()">Clear Filters</a></li>
                </ul>
            </div>
        </div>

        <div style="float: left">
            <span ng-hide="currentPage == 1"><a href="javascript: void(0)" ng-click="currentPage = currentPage - 1" ><< Prev Page</a>&nbsp;</span>
            <span ng-repeat="i in numberToArray( calculatePages() )"><a href="javascript: void(0)" ng-click="$parent.currentPage=$index+1">{{$index+1}}</a>&nbsp;</span>
            <span ng-hide="currentPage == calculatePages()"><a  href="javascript: void(0)" ng-click="currentPage = currentPage + 1">Next Page >></a></span>
            &nbsp;&nbsp;&nbsp;&nbsp;<a href="#">Continue without hotel</a>
        </div>



        <div style="float:right;"><span ng-show="filtersApplied()">{{filteredHotels.length}} of </span>{{hotels.length}} total properties</div>


    </div>
    <div class="eleven columns">
        &nbsp;
    </div>
</div>

<!---Second row--->
<div class="container">
    <div class="eleven columns" style="height: 500px; overflow: auto;">

        <div ng-repeat="hotel in filteredHotels = ( hotels | filter: hotelFilter ) |  limitTo: resultsPerPage"  style="padding-bottom: 15px; padding-left: 5px; padding-right: 5px; background-color: #FFFFFF; min-height:100px; border-bottom: 2px solid #EEEEEE; border-right: 2px solid #EEEEEE; border-left: 2px solid #EEEEEE; margin-top: 7px; margin-right: 10px;">
            <table>
                <tbody>
                <tr>
                    <td style="width: 100px;">
                        <img class="hotelImage" src="{{hotel.SignatureImage}}" height>
                    </td>
                    <td valign="top" style="padding-left: 20px; width: 280px;">
                        <div class="hotelName" style="width: 100%; clear: both; font-weight: bold;">
                            <span class="recordNumber">{{$index + 1}}</span> - <span class="propertyName">{{hotel.PropertyName}}</span>
                        </div>

                        <div class="hotelAddress" style="width: 100%; clear: both; font-size: 11px;">{{hotel.Address}}, {{hotel.City}}, {{hotel.State}}</div>
                        <div class="hotelDistance" style="width: 100%; clear: both; font-size: 11px; font-weight: bolder;">{{hotel.distance}} miles</div>

                        <div class="btn-group">
                            <button ng-click="showHotelDetails=!showHotelDetails;showAreaDetails=false;showAmenities=false;showPhotos=false;showRooms=false;" ng-class="{'btn': true, 'btn-mini': true, 'btn-primary': showHotelDetails}">Details</button>
                            <button ng-click="showAreaDetails=!showAreaDetails;showHotelDetails=false;showAmenities=false;showPhotos=false;showRooms=false;" ng-class="{'btn': true, 'btn-mini': true, 'btn-primary': showAreaDetails}">Area</button>
                            <button ng-click="showAmenities=!showAmenities;showHotelDetails=false;showAreaDetails=false;showPhotos=false;showRooms=false;" ng-class="{'btn': true, 'btn-mini': true, 'btn-primary': showAmenities}">Amenities</button>
                            <button ng-click="showPhotos=!showPhotos;showHotelDetails=false;showAreaDetails=false;showAmenities=false;showRooms=false;" ng-class="{'btn': true, 'btn-mini': true, 'btn-primary': showPhotos}">Photos</button>
                        </div>
                    </td>
                    <td class="fares" align="center" style="width: 100px;">
                        <img class="loading" src="/booking/assets/img/ajax-loader.gif" ng-hide="hotel.roomsReturned">
                        <span class="sold-out" style="color: #FF0000; font-weight: bold;" ng-show="hotel.isSoldOut()">SOLD OUT</span>
                            <span class="room-details-wrapper" ng-show="hotel.hasRoomsAvailable()">
                                <span class="lowest-rate" style="clear: both;">{{hotel.findLowestRoomRate()}}</span>
                                <button
                                    ng-class="{'btn': true, 'btn-primary': hotel.isInPolicy()}"
                                    ng-click="showRooms=!showRooms;showHotelDetails=false;showAreaDetails=false;showAmenities=false;showPhotos=false;" class="btn btn-mini btn-primary">
                                    <span ng-show="showRooms">HIDE ROOMS</span>
                                    <span ng-show="!showRooms">SHOW ROOMS</span>
                                </button>
                            </span>
                    </td>
                </tr>
                <tr ng-show="showHotelDetails">
                    <td colspan="3" class="hotel-details"><b>Hotel Details</b></td>
                </tr>
                <tr ng-show="showAreaDetails">
                    <td colspan="3" class="area-details"><b>Area Details</b></td>
                </tr>
                <tr ng-show="showAmenities">
                    <td colspan="3" class="amenities"><b>Amenities</b><br>
                        <span ng-repeat="amenity in hotel.Amenities"><div style="width: 33%; float: left;">{{amenity}}</div></span>
                    </td>
                </tr>
                <tr ng-show="showPhotos">
                    <td colspan="3" class="photos"><b>Photos</b></td>
                </tr>
                <tr ng-show="showRooms">
                    <td colspan="3" class="rooms"><b>Rooms</b><br>
                        <span ng-repeat="room in hotel.rooms">{{room.description}} - {{room.dailyRate}}<br></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>

    <div class="ten columns" id="mapDiv" style="height: 500px;" >
    </div>
</div>

<!--Bottom row under search results and map-->
<div class="container">
    <div class="eleven columns">

        <div style="float: left">
            <span ng-hide="currentPage == 1"><a href="javascript: void(0)" ng-click="currentPage = currentPage - 1" ><< Prev Page</a>&nbsp;</span>
            <span ng-repeat="i in numberToArray( calculatePages() )"><a href="javascript: void(0)" ng-click="$parent.currentPage=$index+1">{{$index+1}}</a>&nbsp;</span>
            <span ng-hide="currentPage == calculatePages()"><a  href="javascript: void(0)" ng-click="currentPage = currentPage + 1">Next Page >></a></span>
            &nbsp;&nbsp;&nbsp;&nbsp;<a href="#">Continue without hotel</a>
        </div>

    </div>
    <div class="eleven columns">
        &nbsp;
    </div>
</div>

<!--- Modal window to be displayed while search is occurring. --->
<div id="searchWindow" class="modal container hide fade" tabindex="-1" role="dialog" aria-labelledby="mySearchWindow" aria-hidden="true">
    <div class="modal-header">
        <h3 id="myModalHeader">Please Wait</h3>
    </div>
    <div id="myModalBody" class="modal-body">
        <p><i class="icon-spinner icon-spin icon-large"></i> Searching for...</p>
        <p>
            We are finding hotels closest **hotel location** {{search.checkInDate | date:'MM-dd-yyyy'}} - {{search.checkOutDate | date:'MM-dd-yyyy'}}.
        </p>
        <p>
            Tip: Double click on the map to update your search with hotels available in other areas of the city.
        </p>
    </div>
</div>
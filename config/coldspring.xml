<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<!-- Import the centralized environments.xml file -->
	<import resource="/com/shortstravel/config/environment.xml" />

	<bean id="UAPI" class="com.travelport.uapi">
	    <constructor-arg name="serviceURL"><bean factory-bean="EnvironmentService" factory-method="getUAPIServiceURL" /></constructor-arg>
    </bean>

	<bean id="setup" class="booking.services.setup" >
	    <constructor-arg name="useLinkedDatabases"><bean factory-bean="EnvironmentService" factory-method="getUseLinkedDatabases" /></constructor-arg>
	</bean>

	<bean id="General" class="booking.services.general" />

	<bean id="UserService" class="com.shortstravel.security.UserService">
		<constructor-arg name="AccountManager"><ref bean="AccountManager" /></constructor-arg>
		<constructor-arg name="UserManager"><ref bean="UserManager" /></constructor-arg>
	</bean>

    <bean id="AccountService" class="com.shortstravel.account.AccountService">
        <constructor-arg name="AccountManager"><ref bean="AccountManager" /></constructor-arg>
        <constructor-arg name="PolicyManager"><ref bean="PolicyManager" /></constructor-arg>
    </bean>

	<bean id="AccountManager" class="com.shortstravel.account.AccountManager">
		<constructor-arg name="bookDSN"><bean factory-bean="EnvironmentService" factory-method="getBookDSN" /></constructor-arg>
		<constructor-arg name="corporateProductionDSN"><bean factory-bean="EnvironmentService" factory-method="getCorporateProductionDSN" /></constructor-arg>
	</bean>

	<bean id="UserManager" class="com.shortstravel.security.UserManager">
		<constructor-arg name="bookDSN"><bean factory-bean="EnvironmentService" factory-method="getBookDSN" /></constructor-arg>
		<constructor-arg name="corporateProductionDSN"><bean factory-bean="EnvironmentService" factory-method="getCorporateProductionDSN" /></constructor-arg>
	</bean>

	<bean id="PolicyManager" class="com.shortstravel.account.PolicyManager">
		<constructor-arg name="bookDSN"><bean factory-bean="EnvironmentService" factory-method="getBookDSN" /></constructor-arg>
		<constructor-arg name="corporateProductionDSN"><bean factory-bean="EnvironmentService" factory-method="getCorporateProductionDSN" /></constructor-arg>
	</bean>

    <bean id="SearchService" class="com.shortstravel.search.SearchService">
        <constructor-arg name="SearchManager"><ref bean="SearchManager" /> </constructor-arg>
        <constructor-arg name="UserManager"><ref bean="UserManager" /> </constructor-arg>
        <constructor-arg name="AccountManager"><ref bean="AccountManager" /> </constructor-arg>
        <constructor-arg name="HotelSearchManager"><ref bean="HotelSearchManager" /> </constructor-arg>
    </bean>

    <bean id="SearchManager" class="com.shortstravel.search.SearchManager">
        <constructor-arg name="SearchesDSN"><bean factory-bean="EnvironmentService" factory-method="getSearchesDSN" /> </constructor-arg>
        <constructor-arg name="StringGenerator"><ref bean="StringGenerator" /> </constructor-arg>
    </bean>

    <bean id="HotelService" class="com.shortstravel.hotel.HotelService">
        <constructor-arg name="HotelManager"><ref bean="HotelManager" /></constructor-arg>
        <constructor-arg name="SearchManager"><ref bean="SearchManager" /></constructor-arg>
        <constructor-arg name="AccountManager"><ref bean="AccountManager" /></constructor-arg>
        <constructor-arg name="uAPI"><ref bean="uAPI" /></constructor-arg>
    </bean>

	<bean id="VehicleService" class="com.travelport.vehicle.VehicleService"/>

    <bean id="HotelManager" class="com.shortstravel.hotel.HotelManager">
        <constructor-arg name="bookDSN"><bean factory-bean="EnvironmentService" factory-method="getBookDSN" /></constructor-arg>
    </bean>

	<bean id="LoyaltyProgramManager" class="com.shortstravel.traveler.LoyaltyProgramManager">
		<constructor-arg name="corporateProductionDSN"><bean factory-bean="EnvironmentService" factory-method="getCorporateProductionDSN" /></constructor-arg>
	</bean>

    <bean id="LoyaltyProgramService" class="com.shortstravel.traveler.LoyaltyProgramService">
		<constructor-arg name="LoyaltyProgramManager"><ref bean="LoyaltyProgramManager" /></constructor-arg>
	</bean>

	<bean id="Summary" class="booking.services.summary" >
		<constructor-arg name="TravelerService"><ref bean="TravelerService" /></constructor-arg>
	</bean>

	<bean id="AirCreate" class="booking.services.AirCreate" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
		<constructor-arg name="AirParse"><ref bean="AirParse" /></constructor-arg>
		<constructor-arg name="AirPrice"><ref bean="AirPrice" /></constructor-arg>
		<constructor-arg name="TerminalEntry"><ref bean="TerminalEntry" /></constructor-arg>
	</bean>

	<bean id="AirParse" class="booking.services.AirParse" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
	</bean>

	<bean id="lowfare" class="booking.services.lowfare" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
		<constructor-arg name="AirParse"><ref bean="AirParse" /></constructor-arg>
	</bean>

	<bean id="airavailability" class="booking.services.airavailability" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
		<constructor-arg name="AirParse"><ref bean="AirParse" /></constructor-arg>
	</bean>

	<bean id="AirPrice" class="booking.services.AirPrice" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
		<constructor-arg name="AirParse"><ref bean="AirParse" /></constructor-arg>
	</bean>

	<bean id="car" class="booking.services.car" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
		<constructor-arg name="VehicleService"><ref bean="VehicleService" /></constructor-arg>
	</bean>

	<bean id="couldyou" class="booking.services.couldyou" >
		<constructor-arg name="AirPrice"><ref bean="AirPrice" /></constructor-arg>
		<constructor-arg name="car"><ref bean="car" /></constructor-arg>
		<constructor-arg name="HotelPrice"><ref bean="HotelPrice" /></constructor-arg>
	</bean>

	<bean id="hotelprice" class="booking.services.hotelprice" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
	</bean>

	<bean id="HotelSearchManager" class="booking.services.hotelsearch" />

	<bean id="TerminalEntry" class="booking.services.terminalentry" >
		<constructor-arg name="UAPI"><ref bean="UAPI" /></constructor-arg>
		<constructor-arg name="General"><ref bean="General" /></constructor-arg>
	</bean>

    <bean id="StringGenerator" class="com.shortstravel.security.StringGenerator" />

</beans>